% ---------
%  Compile with "pdflatex hw0".
% --------
%!TEX TS-program = pdflatex
%!TEX encoding = UTF-8 Unicode

\documentclass[11pt]{article}
\usepackage{jeffe,handout,graphicx}
\usepackage[utf8]{inputenc}		% Allow some non-ASCII Unicode in source

%  Redefine suits
\usepackage{pifont}
\def\Spade{\text{\ding{171}}}
\def\Heart{\text{\textcolor{Red}{\ding{170}}}}
\def\Diamond{\text{\textcolor{Red}{\ding{169}}}}
\def\Club{\text{\ding{168}}}

\def\Cdot{\mathbin{\text{\normalfont \textbullet}}}
\def\Sym#1{\textbf{\texttt{\color{BrickRed}#1}}}



% =====================================================
%   Define common stuff for solution headers
% =====================================================
\Class{CS $498$ algorithm}
\Semester{Spring $2019$}
\Authors{2}
%\Section{}

% =====================================================
\begin{document}

% ---------------------------------------------------------


% ---------------------------------------------------------
% Change authors again
\AuthorOne{Ray Ying}{xinruiy2@illinois.edu}
\AuthorTwo{Aditya Pillai}{apillai4@illinois.edu}

\HomeworkHeader{$3$}{$2$}

\begin{quote}

\end{quote}
\hrule


\begin{solution}
\item
  Follow the same analysis in the lecture slides, let $z_l = g_l(i)C[l,h_l(i)]$. $\mathbb{E}(z_l) = x_i$ and $Var(z_l) =  (\norm{x}^2_2 - x_i^2)/ \omega = \epsilon^2(\norm{x}^2_2 - x_i^2)/6$.\\

    Analysing the largest $l$ coordinate, let $A_l$ be the event that at least $1$ of the $l$ largest coordinate collides with $h_l(i)$, by linearity of expectation, $\mathbb{E}(A_l) = \frac{l}{\omega} = \frac{1}{6}$. By Markov, $Pr[A_l \geq 1] \leq \frac{1}{6}$\\
    
    The probability that too many small coordinates collides with $h_l(i)$ so that $|z_l - x_i| \geq \epsilon\norm{y_i}_2$. The small coordinates correspond to the non-zero coordinates in $y_i$. Let $z_l'$ be the contribution to $z_l$ from coordinates of $y_i$. $\mathbb{E}(z_l') = 0$, $Var(z_l') \leq \mathbb{E}(z_l'^2) = \norm{y_i}^2_2/\omega = \epsilon^2(\norm{y_i}^2_2)/6$. Since they are pairwise independent, by Chebyshev's inequality, $Pr[|z_l'| \geq \epsilon\norm{y_i}^2_2] \leq \frac{1}{6}. $ \\
    
    To have $|z_l - x_i| \geq \epsilon\norm{y_i}_2$, either any big coordinates collides with $h_l(i)$ or too many small coordinates collides with $h_l(i)$. By union bound, we have $Pr[|z_l - x_i| \geq \epsilon\norm{y_i}_2] \leq Pr[A \geq 1] + Pr[|y_i| \geq \epsilon\norm{y_i}^2_2] \leq \frac{1}{3}$\\
    
    By Chernoff bound, if the median is bad, then at least half of $z_l$ are bad. With $d = O(log$ $n)$, expected at most $\frac{1}{3}\cdot d$ is bad. Let $k$ be the count of good $z_l$, $\mathbb{E}(k) = \frac{2}{3} \cdot d$. If half of $z_l$ are bad, $k \leq \frac{d}{2}$
    
    $$ Pr[k \leq (1 - \delta)\mu] \leq e^{\frac{-(1/6)^2(\frac{2d}{3})}{2}} \leq e^{-cd} = e^{-c(log(n))}$$
    
    We choose $c = 2$, we can guarantee with probability at least $(1 - 1/n)$ that $|\tilde{x_i} - x_i| \leq \epsilon\norm{y_i}_2$ for $i \in [n]$.


\end{solution}
\end{document}
